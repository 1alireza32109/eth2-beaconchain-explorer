{{ define "depositChart" }}
  <div class="d-flex flex-column justify-content-center">
    <div id="deposit-chart"></div>
    <script>
    window.addEventListener('load', function() {
        Highcharts.stockChart('deposit-chart',{
            chart: { type: {{.Data.Type}} },
            rangeSelector: {  enabled: false },
            title: { 
                useHTML: true,
                text: '<a href="charts/{{.Path}}">{{.Data.Title}}</a>',
            },
            subtitle: { text: {{.Data.Subtitle}} },
            plotOptions: { 
                column: { 
                    stacking: {{.Data.StackingMode}},
                    dataGrouping: {
                        {{ if .Data.ColumnDataGroupingApproximation }}approximation: {{.Data.ColumnDataGroupingApproximation}},{{end}}
                    }
                },
                wordcloud: {
                    rotation: {
                        from: -10, to: 10, orientations: 5,
                    },
                    minFontSize: 8,
                    maxFontSize: 25,
                },
                series: {
                    {{ if .Data.PlotOptionsSeriesCursor }}cursor: {{.Data.PlotOptionsSeriesCursor}},{{end}}
                    events: {
                        {{ if .Data.PlotOptionsSeriesEventsClick }}click: {{.Data.PlotOptionsSeriesEventsClick}},{{end}}
                    }
                }
            },
            xAxis: {
                type: 'datetime',
                labels: {
                    // formatter: function(){
                    //     var epoch = timeToEpoch(this.value)
                    //     var orig = this.axis.defaultLabelFormatter.call(this)
                    //     return `${orig}<br/>Epoch ${epoch}`
                    // }
                }
            },
            yAxis: [{ 
                title: { text: {{.Data.YAxisTitle}} },
                opposite: false,
            }],
            series: {{.Data.Series}},
            navigator: { enabled: false },
            scrollbar: { enabled: false },
            tooltip: {
                // formatter: function(tooltip) {
                //     var orig = tooltip.defaultFormatter.call(this, tooltip)
                //     var epoch = timeToEpoch(this.x)
                //     orig[0] = orig[0]+'<span style="font-size:10px">Epoch '+epoch+'</span>'
                //     return orig
                // }
            },
            legend: {enabled: true}
        })
    })
    </script>
  </div>
{{end}}